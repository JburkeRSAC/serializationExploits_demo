<?php
class User{
	public $username = '';
	private $is_admin = false;
	function __construct($username){ 
		$this->username = $username; 
	}
	function isAdmin(){
		return $this->is_admin; 
	}
}
function initUser() {
	$user = new User('Guest');
	$data = base64_encode(serialize($user));
	setCookie('user', $data, time()+3600);
	echo '<script>location.href="./user.php"</script>';
}
if(isset($_COOKIE['user'])){
	$user = unserialize(base64_decode($_COOKIE['user']));
	if($user){
        	if($user->isAdmin()){
			echo 'Welcome Come Back, Admninistrator.'; 
		}else{ 
			echo "Hello, $user->username.";
		}
	}else{
		initUser();
	}
}else{
	initUser();
}
?>
